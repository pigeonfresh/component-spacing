
@function nested($state) {
  @if ($state) {
    @return '&';
  }
  @return '';
}

@mixin createStyles($property, $className, $directions, $spacingMap, $nested) {
  $nestedSelector: nested($nested);

  @each $option, $value in $spacingMap {
    #{$nestedSelector}.#{$className}-#{$option} {
      @each $direction, $name in $directions {
        #{$property}-#{$direction}: #{$value};
      }
    }

    @each $direction, $name in $directions {
      #{$nestedSelector}.#{$className}-#{$name}-#{$option} {
        #{$property}-#{$direction}: $value;
      }
    }
  }
}

@mixin createPaddingStyles($spacingMap: $componentPadding, $nested: false) {
  @include createStyles(padding, $paddingClassName, $paddingDirection, $spacingMap, $nested);
}

@mixin createMarginStyles($spacingMap: $componentMargin, $nested: false) {
  @include createStyles(margin, $marginClassName, $marginDirection, $spacingMap, $nested);
}

@mixin createSpacingStyles($spacingMap: $componentSpacing, $nested: false) {
  @include createMarginStyles($spacingMap, $nested);
  @include createPaddingStyles($spacingMap, $nested);
}

@mixin createAppendedSpacingStyles($spacingMap: $componentSpacing) {
  @include createSpacingStyles($spacingMap, true);
}

@mixin createAppendedMarginStyles($spacingMap: $componentMargin) {
  @include createMarginStyles($spacingMap, true);
}

@mixin createAppendedPaddingStyles($spacingMap: $componentPadding) {
  @include createPaddingStyles($spacingMap, true);
}

@mixin checkPicksTotal($list) {
  @if (length($list) >= 3) {
    @error 'Your list can not contain more than 3 items';
  }
}

@mixin checkSpacingPicks($list, $map) {
  @each $pick in $list {
    @if map-has-key($map, $pick) {
    } @else {
      @error 'It seems the value "#{$pick}" doesn\'t exist ðŸ˜¢';
    }
  }
}

@mixin check($picks, $map) {
  @include checkPicksTotal($picks);
  @include checkSpacingPicks($picks, $map);
}

@function getSpacingValue($spacingPick, $map) {
  @return map-get($map, $spacingPick);
}

@mixin component-padding($spacing: $defaultComponentPadding, $map: $componentPadding) {
  @include check($spacing, $map);
  padding-top: getSpacingValue(nth($spacing, 1), $map);
  padding-bottom: getSpacingValue(nth($spacing, -1), $map);
}

@mixin component-margin($spacing: $defaultComponentMargin, $map: $componentMargin) {
  @include check($spacing, $map);
  margin-top: getSpacingValue(nth($spacing, 1), $map);
  margin-bottom: getSpacingValue(nth($spacing, -1), $map);
}
